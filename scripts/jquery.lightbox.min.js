!function($){"object"==typeof window.console&&void 0!==window.console.emulated||("object"!=typeof window.console||"function"!=typeof window.console.log&&"object"!=typeof window.console.log?(window.console={},window.console.log=window.console.debug=window.console.warn=window.console.trace=function(){},window.console.error=function(){for(var t="An error has occured. More information will be available in the console log.",i=0;i<arguments.length&&"string"==typeof arguments[i];++i)t+="\n"+arguments[i];throw"undefined"!=typeof Error?new Error(t):t}):(void 0===window.console.debug&&(window.console.debug=function(){for(var t=["console.debug:"],i=0;i<arguments.length;i++)t.push(arguments[i]);window.console.log.apply(window.console,t)}),void 0===window.console.warn&&(window.console.warn=function(){for(var t=["console.warn:"],i=0;i<arguments.length;i++)t.push(arguments[i]);window.console.log.apply(window.console,t)}),void 0===window.console.error&&(window.console.error=function(){for(var t=["console.error"],i=0;i<arguments.length;i++)t.push(arguments[i]);window.console.log.apply(window.console,t)}),void 0===window.console.trace&&(window.console.trace=function(){window.console.error.apply(window.console,["console.trace does not exist"])})),window.console.emulated=!0),String.prototype.queryStringToJSON=String.prototype.queryStringToJSON||function(){var params=String(this);if(params=params.substring(params.indexOf("?")+1),params=params.replace(/\+/g,"%20"),"{"===params.substring(0,1)&&"}"===params.substring(params.length-1))return eval(decodeURIComponent(params));params=params.split(/\&(amp\;)?/);for(var json={},i=0,n=params.length;i<n;++i){var param=params[i]||null;if(null!==param&&(param=param.split("="),null!==param)){var key=param[0]||null;if(null!==key&&void 0!==param[1]){var value=param[1];key=decodeURIComponent(key),value=decodeURIComponent(value);try{value=eval(value)}catch(t){}var keys=key.split(".");if(1===keys.length)json[key]=value;else{var path="",cmd="";$.each(keys,function(ii,key){path+='["'+key.replace(/"/g,'\\"')+'"]',jsonCLOSUREGLOBAL=json,cmd="if ( typeof jsonCLOSUREGLOBAL"+path+' === "undefined" ) jsonCLOSUREGLOBAL'+path+" = {}",eval(cmd),json=jsonCLOSUREGLOBAL,delete jsonCLOSUREGLOBAL}),jsonCLOSUREGLOBAL=json,valueCLOSUREGLOBAL=value,cmd="jsonCLOSUREGLOBAL"+path+" = valueCLOSUREGLOBAL",eval(cmd),json=jsonCLOSUREGLOBAL,delete jsonCLOSUREGLOBAL,delete valueCLOSUREGLOBAL}}}}return json},Array.prototype.remove=function(t,i){var e=this.slice((i||t)+1||this.length);return this.length=t<0?this.length+t:t,this.push.apply(this,e)},Array.prototype.get=function(t,i){return"first"===t?t=0:"last"===t?t=this.length-1:"prev"===t?t=this.index-1:"next"===t?t=this.index+1:t||0===t||(t=this.index),i&&this.setIndex(t),this.exists(t)?this[t]:void 0},Array.prototype.each=function(t){for(var i=0;i<this.length&&!1!==t(i,this[i],this);++i);return this},Array.prototype.validIndex=function(t){return t>=0&&t<this.length},Array.prototype.setIndex=function(t){return this.validIndex(t)?this.index=t:this.index=null,this},Array.prototype.current=function(t){return this.get(t,!0)},Array.prototype.isEmpty=function(){return 0===this.length},Array.prototype.isSingle=function(){return 1===this.length},Array.prototype.isNotEmpty=function(){return 0!==this.length},Array.prototype.isNotEmpty=function(){return this.length>1},Array.prototype.isLast=function(t){return t=void 0===t?this.index:t,!this.isEmpty()&&t===this.length-1},Array.prototype.isFirst=function(t){return t=void 0===t?this.index:t,!this.isEmpty()&&0===t},Array.prototype.clear=function(){this.length=0},Array.prototype.next=function(t){return this.get(this.index+1,t)},Array.prototype.prev=function(t){return this.get(this.index-1,t)},Array.prototype.reset=function(){return this.index=null,this},Array.prototype.set=function(t,i){if(!(t<this.length&&t>=0))throw new Error("Array.prototype.set: [index] above this.length");return this[t]=i,this},Array.prototype.loop=function(){return this.index||0===this.index?this.next():this.current(0)},Array.prototype.add=function(){return this.push.apply(this,arguments),this},Array.prototype.insert=function(t,i){"number"!=typeof t&&(t=this.length),t=t<=this.length?t:this.length;var e=this.slice(t);return this.length=t,this.push(i),this.push.apply(this,e),this},Array.prototype.exists=Array.prototype.exists||function(t){return void 0!==this[t]},Array.prototype.has=Array.prototype.has||function(t){for(var i=!1,e=0,o=this.length;e<o;++e)if(t==this[e]){i=!0;break}return i},$.fn.once=$.fn.once||function(t,i,e){var o=$(this);return e?(o.unbind(t,e),o.bind(t,i,e)):(e=i,o.unbind(t,e),o.bind(t,e)),o},$.fn.binder=$.fn.binder||function(t,i,e){var o=$(this);return e?o.bind(t,i,e):(e=i,o.bind(t,e)),o},$.fn.lastclick=$.fn.lastclick||function(t,i){return $(this).binder("lastclick",t,i)},$.event.special.lastclick=$.event.special.lastclick||{setup:function(t,i){$(this).bind("click",$.event.special.lastclick.handler)},teardown:function(t){$(this).unbind("click",$.event.special.lastclick.handler)},handler:function(t){var i=function(){var t=$(this),i=t.data("lastclick-timeout")||!1;i&&clearTimeout(i),i=!1,t.data("lastclick-timeout",i)};(function(t){var e=this;i.call(e);var o=$(e);o.data("lastclick-clicks",(o.data("lastclick-clicks")||0)+1);var n=setTimeout(function(){var n=o.data("lastclick-clicks");i.apply(e,[t]),o.data("lastclick-clicks",0),t.type="lastclick",$.event.handle.apply(e,[t,n])},300);o.data("lastclick-timeout",n)}).apply(this,[t])}},$.fn.preventDefault=$.fn.preventDefault||function(){return $(this).click(function(t){return t.preventDefault(),!1})},$.LightboxClass=function(){this.construct()},$.fn.lightbox=function(t){if($.Lightbox=$.Lightbox||new $.LightboxClass,$.Lightbox.ie6&&!$.Lightbox.ie6_support)return this;t=$.extend({start:!1,events:!0},t);var i=$(this);if(t.events&&(i.preventDefault().once("lastclick",function(t){var e=$(this),o=i.index(e);return!!$.Lightbox.init(o,i)&&(!!$.Lightbox.start()&&(t.preventDefault(),!1))}),i.addClass("lightbox-enabled")),t.start){$(this);if(!$.Lightbox.init(0,i))return this;if(!$.Lightbox.start())return this}return this},$.extend($.LightboxClass.prototype,{images:[],constructed:!1,compressed:null,src:null,baseurl:null,files:{compressed:{scripts:{lightbox:"scripts/jquery.lightbox.min.js",colorBlend:"scripts/jquery.color.min.js"},styles:{lightbox:"styles/jquery.lightbox.min.css"}},uncompressed:{scripts:{lightbox:"scripts/jquery.lightbox.js",colorBlend:"scripts/jquery.color.js"},styles:{lightbox:"styles/jquery.lightbox.css"}},images:{prev:"images/prev.gif",next:"images/next.gif",blank:"images/blank.gif",loading:"images/loading.gif"}},text:{image:"Image",of:"of",close:"Close X",closeInfo:"You can also click anywhere outside the image to close.",download:"Download.",help:{close:"Click to close",interact:"Hover to interact"},about:{text:"jQuery Lightbox Plugin (balupton edition)",title:"Licenced under the MIT License.",link:"https://balupton.com/projects/jquery-lightbox"}},keys:{close:"c",prev:"p",next:"n"},handlers:{show:null},opacity:.9,padding:null,speed:400,rel:"lightbox",auto_relify:!0,auto_scroll:"follow",auto_resize:!0,ie6:null,ie6_support:!0,colorBlend:null,download_link:!0,show_helper_text:!0,show_linkback:!0,show_info:"auto",show_extended_info:"auto",options:["show_helper_text","auto_scroll","auto_resize","download_link","show_info","show_extended_info","ie6_support","colorBlend","baseurl","files","text","show_linkback","keys","opacity","padding","speed","rel","auto_relify"],construct:function(t){var i=void 0===this.constructed||!1===this.constructed;this.constructed=!0;var e=i;t=t||{};var o=function(t,i){if("object"==typeof t)for(var e in t)t[e]=o(t[e],i);else if("array"==typeof i){e=0;for(var n=t.length;e<n;++e)t[e]=o(t[e],i)}else t=i+t;return t};if(i&&void 0===t.files){this.compressed=null;var n=$("script[src*="+this.files.compressed.scripts.lightbox+"]:first");0!==n.length?($.extend(!0,this.files,this.files.compressed),this.compressed=!0):0!==(n=$("script[src*="+this.files.uncompressed.scripts.lightbox+"]:first")).length&&($.extend(!0,this.files,this.files.uncompressed),this.compressed=!1),null===this.compressed?(window.console.error("Lightbox was not able to find it's javascript script tag necessary for auto-inclusion."),e=!1):(this.src=n.attr("src"),this.baseurl=this.src.substring(0,this.src.indexOf(this.files.scripts.lightbox)),this.files=o(this.files,this.baseurl),t=$.extend(t,this.src.queryStringToJSON())),this.images.image={src:"",title:"Untitled",description:"",name:"",color:null,width:null,height:null,id:null,image:!0},this.images.prepare=function(t){var i=$.extend({},this.image);if(t.tagName)if((t=$(t)).attr("src")||t.attr("href")){i.src=t.attr("src")||t.attr("href"),i.title=t.attr("title")||t.attr("alt")||i.title,i.name=t.attr("name")||"",i.color=t.css("backgroundColor");var e=i.title.indexOf(": ");e>0&&(i.description=i.title.substring(e+2)||i.description,i.title=i.title.substring(0,e)||i.title)}else i=null;else i=t.src?$.extend(this.image,t):null;return i&&(i.id=i.id||i.src+i.title+i.description),i},this.images.create=function(t){var i=this;if(!t.each){var e=i.prepare(t);return e?i.push(e):window.console.error("We dont know what we have:",t,e),i}t.each(function(t,e){i.create(e)})}}else"object"==typeof t.files?t.files=o(t.files,this.baseurl):e=!1;for(var s in this.options){var r=this.options[s];"object"==typeof t[r]&&"object"==typeof this[r]?this[r]=$.extend(!0,this[r],t[r]):void 0!==t[r]&&(this[r]=t[r])}return delete s,i&&navigator.userAgent.indexOf("MSIE 6")>=0?this.ie6=!0:this.ie6=!1,(e||void 0!==t.download_link||void 0!==t.colorBlend||"object"==typeof t.files||"object"==typeof t.text||void 0!==t.show_linkback||void 0!==t.scroll_with)&&$(function(){$.Lightbox.domReady()}),!0},domReady:function(){var t=document.getElementsByTagName($.browser.safari?"head":"body")[0],i=this.files.styles,e=this.files.scripts;for(stylesheet in!0===this.colorBlend&&void 0===$.colorBlend?this.colorBlend=!0:(this.colorBlend=void 0!==$.colorBlend,delete e.colorBlend),i){var o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.media="screen",o.href=i[stylesheet],o.id="lightbox-stylesheet-"+stylesheet.replace(/[^a-zA-Z0-9]/g,""),$("#"+o.id).remove(),t.appendChild(o)}for(script in delete e.lightbox,e){var n=document.createElement("script");n.type="text/javascript",n.src=e[script],n.id="lightbox-script-"+script.replace(/[^a-zA-Z0-9]/g,""),$("#"+n.id).remove(),t.appendChild(n)}return delete e,delete i,delete t,$("#lightbox,#lightbox-overlay").remove(),$("body").append('<div id="lightbox-overlay"><div id="lightbox-overlay-text">'+(this.show_linkback?'<p><span id="lightbox-overlay-text-about"><a href="#" title="'+this.text.about.title+'">'+this.text.about.text+"</a></span></p><p>&nbsp;</p>":"")+(this.show_helper_text?'<p><span id="lightbox-overlay-text-close">'+this.text.help.close+'</span><br/>&nbsp;<span id="lightbox-overlay-text-interact">'+this.text.help.interact+"</span></p>":"")+'</div></div><div id="lightbox"><div id="lightbox-imageBox"><div id="lightbox-imageContainer"><img id="lightbox-image" /><div id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+this.files.images.loading+'" /></a></div></div></div><div id="lightbox-infoBox"><div id="lightbox-infoContainer"><div id="lightbox-infoHeader"><span id="lightbox-caption">'+(this.download_link?'<a href="#" title="'+this.text.download+'" id="lightbox-caption-title"></a>':'<span id="lightbox-caption-title"></span>')+'<span id="lightbox-caption-seperator"></span><span id="lightbox-caption-description"></span></span></div><div id="lightbox-infoFooter"><span id="lightbox-currentNumber"></span><span id="lightbox-close"><a href="#" id="lightbox-close-button" title="'+this.text.closeInfo+'">'+this.text.close+'</a></span></div><div id="lightbox-infoContainer-clear"></div></div></div></div>'),this.resizeBoxes(),this.repositionBoxes(),$("#lightbox,#lightbox-overlay,#lightbox-overlay-text-interact").hide(),this.ie6&&this.ie6_support&&$("#lightbox-overlay").css({position:"absolute",top:"0px",left:"0px"}),$.each(this.files.images,function(){var t=new Image;t.onload=function(){t.onload=null,t=null},t.src=this}),$(window).unbind("resize").resize(function(){$.Lightbox.resizeBoxes("resized")}),"follow"===this.scroll&&$(window).scroll(function(){$.Lightbox.repositionBoxes()}),$("#lightbox-nav-btnPrev").unbind().preventDefault().hover(function(){$(this).css({background:"url("+$.Lightbox.files.images.prev+") left 45% no-repeat"})},function(){$(this).css({background:"transparent url("+$.Lightbox.files.images.blank+") no-repeat"})}).lastclick(function(){return $.Lightbox.showImage("prev"),!1}),$("#lightbox-nav-btnNext").unbind().preventDefault().hover(function(){$(this).css({background:"url("+$.Lightbox.files.images.next+") right 45% no-repeat"})},function(){$(this).css({background:"transparent url("+$.Lightbox.files.images.blank+") no-repeat"})}).lastclick(function(){return $.Lightbox.showImage("next"),!1}),this.show_linkback&&$("#lightbox-overlay-text-about a").preventDefault().lastclick(function(){return window.open($.Lightbox.text.about.link),!1}),$("#lightbox-overlay-text-close").unbind().hover(function(){$("#lightbox-overlay-text-interact").fadeIn()},function(){$("#lightbox-overlay-text-interact").fadeOut()}),this.download_link&&$("#lightbox-caption-title").preventDefault().lastclick(function(){return window.open($(this).attr("href")),!1}),$("#lightbox-overlay, #lightbox, #lightbox-loading-link, #lightbox-btnClose").unbind().preventDefault().lastclick(function(){return $.Lightbox.finish(),!1}),this.auto_relify&&this.relify(),!0},relify:function(){var t={},i=0,e=this.rel;return $.each($("[rel*="+e+"]"),function(o,n){var s=$(n).attr("rel");s===e&&(s=i),void 0===t[s]&&(t[s]=[],i++),t[s].push(n)}),$.each(t,function(t,i){$(i).lightbox()}),!0},init:function(t,i){return void 0===i&&(i=t,t=0),this.images.clear(),this.images.create(i),this.images.isEmpty()?(window.console.warn("WARNING","Lightbox started, but no images: ",t,i),!1):!!this.images.current(t)||(window.console.warn("WARNING","Could not find current image: ",t,this.images),!1)},start:function(){return this.visible=!0,"disable"===this.scroll&&$(document.body).css("overflow","hidden"),$("embed, object, select").css("visibility","hidden"),this.resizeBoxes("general"),this.repositionBoxes({speed:0}),$("#lightbox-infoFooter").hide(),$("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-infoBox").hide(),$("#lightbox-overlay").css("opacity",this.opacity).fadeIn(400,function(){if($("#lightbox").fadeIn(300),!$.Lightbox.showImage())return $.Lightbox.finish(),!1}),!0},finish:function(){$("#lightbox").hide(),$("#lightbox-overlay").fadeOut(function(){$("#lightbox-overlay").hide()}),$("embed, object, select").css({visibility:"visible"}),this.images.reset(),"disable"===this.scroll&&$(document.body).css("overflow","visible"),this.visible=!1},resizeBoxes:function(t){if("transition"!==t){var i=$(this.ie6?document.body:document);$("#lightbox-overlay").css({width:i.width(),height:i.height()}),delete i}switch(t){case"general":return!0;case"resized":if(!1===this.auto_resize)return this.repositionBoxes({nHeight:u,speed:this.speed}),!0}var e=this.images.current();if(!e||!e.width||!this.visible)return!1;var o=e.width,n=e.height,s=$(window).width(),r=$(window).height();if(!1!==this.auto_resize)for(var l,a=Math.floor(.8*s),h=Math.floor(.8*r);o>a||n>h;)o>a&&(l=a/o,o=a,n=Math.floor(n*l)),n>h&&(l=h/n,n=h,o=Math.floor(o*l));var c=$("#lightbox-imageBox").width(),d=$("#lightbox-imageBox").height(),g=o+2*this.padding,u=n+2*this.padding,p=c-g,b=d-u;return $("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css("height",u),$("#lightbox-infoBox").css("width",g),"transition"===t?0===p&&0===b?(this.pause(this.speed/3),this.showImage(null,3)):($("#lightbox-image").width(o).height(n),$("#lightbox-imageBox").animate({width:g,height:u},this.speed,function(){$.Lightbox.showImage(null,3)})):($("#lightbox-image").animate({width:o,height:n},this.speed),$("#lightbox-imageBox").animate({width:g,height:u},this.speed)),this.repositionBoxes({nHeight:u,speed:this.speed}),!0},repositioning:!1,reposition_failsafe:!1,repositionBoxes:function(t){if(this.repositioning)return this.reposition_failsafe=!0,null;this.repositioning=!0,(t=$.extend({},t)).callback=t.callback||null,t.speed=t.speed||"slow";var i=this.getPageScroll(),e=t.nHeight||parseInt($("#lightbox").height(),10),o=i.yScroll+($(window).height()-e)/2.5,n={left:i.xScroll,top:o};return t.speed?$("#lightbox").animate(n,"slow",function(){$.Lightbox.reposition_failsafe?($.Lightbox.repositioning=$.Lightbox.reposition_failsafe=!1,$.Lightbox.repositionBoxes(t)):($.Lightbox.repositioning=!1,t.callback&&t.callback())}):($("#lightbox").css(n),this.reposition_failsafe?(this.repositioning=this.reposition_failsafe=!1,this.repositionBoxes(t)):this.repositioning=!1),!0},visible:!1,showImage:function(t,i){if(i=i||1,t=this.images.current(t)||this.images.get("first",!0)){switch(i){case 1:if(this.KeyboardNav_Disable(),$("#lightbox-loading").show(),$("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-infoBox").hide(),$("#lightbox-imageBox").unbind(),t.width&&t.height)this.showImage(null,2);else{var e=new Image;e.onload=function(){t.width=e.width,t.height=e.height,$.Lightbox.showImage(null,2),e.onload=null,e=null},e.src=t.src}break;case 2:$("#lightbox-image").attr("src",t.src),(void 0===this.padding||null===this.padding||isNaN(this.padding))&&(this.padding=parseInt($("#lightbox-imageContainer").css("padding-left"),10)||parseInt($("#lightbox-imageContainer").css("padding"),10)||0),this.colorBlend&&($("#lightbox-overlay").animate({backgroundColor:t.color},2*this.speed),$("#lightbox-imageBox").css("borderColor",t.color)),this.resizeBoxes("transition");break;case 3:$("#lightbox-loading").hide(),$("#lightbox-image").fadeIn(1.5*this.speed,function(){$.Lightbox.showImage(null,4)}),this.preloadNeighbours(),null!==this.handlers.show&&this.handlers.show(t);break;case 4:var o=$("#lightbox-caption-title").html(t.title||"Untitled");this.download_link&&o.attr("href",this.download_link?t.src:""),delete o,$("#lightbox-caption-seperator").html(t.description?": ":""),$("#lightbox-caption-description").html(t.description||"&nbsp;"),this.images.length>1?$("#lightbox-currentNumber").html(this.text.image+"&nbsp;"+(this.images.index+1)+"&nbsp;"+this.text.of+"&nbsp;"+this.images.length):$("#lightbox-currentNumber").html("&nbsp;"),$("#lightbox-imageBox").unbind("mouseover").mouseover(function(){$("#lightbox-infoBox:not(:visible)").stop().slideDown("fast")}),$("#lightbox-infoBox").unbind("mouseover").mouseover(function(){$("#lightbox-infoFooter:not(:visible)").stop().slideDown("fast")}),!0===this.show_extended_info?($("#lightbox-imageBox").trigger("mouseover"),$("#lightbox-infoBox").trigger("mouseover")):!0===this.show_info&&$("#lightbox-imageBox").trigger("mouseover"),$("#lightbox-nav-btnPrev, #lightbox-nav-btnNext").css({background:"transparent url("+this.files.images.blank+") no-repeat"}),this.images.isFirst()||$("#lightbox-nav-btnPrev").show(),this.images.isLast()||$("#lightbox-nav-btnNext").show(),$("#lightbox-nav").show(),this.KeyboardNav_Enable();break;default:return window.console.error("Don't know what to do: ",t,i),this.showImage(t,1)}return!0}},preloadNeighbours:function(){if(this.images.isSingle()||this.images.isEmpty())return!0;var t=this.images.current(),i=this.images.index;if(!t)return t;var e=this.images.prev();e&&((new Image).src=e.src),this.images.setIndex(i);var o=this.images.next();o&&((new Image).src=o.src),this.images.setIndex(i)},KeyboardNav_Enable:function(){$(document).keydown(function(t){$.Lightbox.KeyboardNav_Action(t)})},KeyboardNav_Disable:function(){$(document).unbind("keydown")},KeyboardNav_Action:function(t){var i=(t=t||window.event).keyCode,e=t.DOM_VK_ESCAPE||27,o=String.fromCharCode(i).toLowerCase();return o===this.keys.close||i===e?$.Lightbox.finish():o===this.keys.prev||37===i?$.Lightbox.showImage("prev"):o!==this.keys.next&&39!==i||$.Lightbox.showImage("next")},getPageScroll:function(){var t,i;return self.pageYOffset?(i=self.pageYOffset,t=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(i=document.documentElement.scrollTop,t=document.documentElement.scrollLeft):document.body&&(i=document.body.scrollTop,t=document.body.scrollLeft),{xScroll:t,yScroll:i}},pause:function(t){var i=new Date,e=null;do{e=new Date}while(e-i<t)}}),void 0===$.Lightbox&&($.Lightbox=new $.LightboxClass)}(jQuery);
